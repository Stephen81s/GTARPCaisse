<script>
/****************************************************
 * script_service.html
 * --------------------------------------------------
 * Gestion des services :
 *  - Nom du service
 *  - Prix
 *  - Envoi au backend
 *  - Affichage du r√©sultat
 ****************************************************/

/****************************************************
 * üöÄ envoyerServiceUI()
 ****************************************************/
function envoyerServiceUI() {
  const nom = document.getElementById("service-nom").value.trim();
  const prix = Number(document.getElementById("service-prix").value) || 0;

  if (!nom) {
    alert("‚ö†Ô∏è Veuillez entrer un nom de service.");
    return;
  }

  if (prix <= 0) {
    alert("‚ö†Ô∏è Le prix doit √™tre sup√©rieur √† 0.");
    return;
  }

  console.log("üü™ [SERVICE] Envoi :", { nom, prix });

  google.script.run
    .withSuccessHandler(reponseService)
    .withFailureHandler(err => {
      console.error("üí• [SERVICE] ERREUR :", err);
      alert("‚ùå Erreur lors de l‚Äôenregistrement du service.");
    })
    .enregistrerService({ nom, prix });
}

/****************************************************
 * üü© reponseService(retour)
 ****************************************************/
function reponseService(retour) {
  console.log("üü© [SERVICE] R√©ponse backend :", retour);

  if (!retour || !retour.success) {
    alert("‚ùå Impossible d‚Äôenregistrer le service.");
    return;
  }

  alert("üü© Service enregistr√© avec succ√®s !");
  resetServiceUI();
}

/****************************************************
 * üîÑ resetServiceUI()
 ****************************************************/
function resetServiceUI() {
  document.getElementById("service-nom").value = "";
  document.getElementById("service-prix").value = 0;
}
</script>
