<!-- ============================================================
     PAGE : page_admin_panel
     MODULE : Panneau Admin â€” RP Business System
     VERSION : PRO 2026
============================================================ -->

<div class="page-container">

  <!-- Ã‰TAT DE CONNEXION -->
  <section class="card">
    <h2>ğŸ” Ã‰tat de connexion</h2>
    <div id="admin_etatConnexion">Chargementâ€¦</div>
  </section>

  <!-- MODULES JOUEUR RP -->
  <section class="card">
    <h2>ğŸ§ Joueur RP</h2>
    <button onclick="admin_ouvrirPopupCreate()">CrÃ©er un perso RP</button>
    <button onclick="admin_ouvrirPopupLocal()">Sâ€™enregistrer (local)</button>
    <button onclick="admin_resetLocalPlayer()">Reset joueur local</button>
  </section>

  <!-- MODULES ADMIN -->
  <section class="card" id="adminSection" style="display:none;">
    <h2>ğŸ›¡ï¸ Administration</h2>
    <button onclick="admin_ouvrirPopupEntreprise()">CrÃ©er une entreprise</button>
    <button onclick="admin_updateAll()">Mise Ã  jour TOTALE</button>
    <button onclick="admin_resetSystem()">RESET complet du systÃ¨me</button>
  </section>

  <!-- ADMIN PRINCIPAL -->
  <section class="card" id="adminPrincipalSection" style="display:none;">
    <h2>ğŸ‘‘ Gestion des administrateurs</h2>

    <button onclick="admin_openAddAdminPopup()">â• Ajouter un admin</button>
    <button onclick="admin_openRemoveAdminPopup()">â– Retirer un admin</button>

    <h3>Admins secondaires :</h3>
    <ul id="admin_adminsList"></ul>
  </section>

</div>

<!-- POPUP : Enregistrement local -->
<div id="admin_popupLocal" class="popup-overlay" style="display:none;">
  <div class="popup-box">
    <h2>Sâ€™enregistrer</h2>

    <label>Nom RP :</label>
    <input id="admin_localNom" type="text">

    <label>PrÃ©nom RP :</label>
    <input id="admin_localPrenom" type="text">

    <button onclick="admin_validerEnregistrementLocal()">Sâ€™enregistrer</button>
    <button class="btn-close" onclick="admin_fermerPopupLocal()">Annuler</button>
  </div>
</div>

<!-- POPUP : CrÃ©ation joueur -->
<div id="admin_popupCreate" class="popup-overlay" style="display:none;">
  <div class="popup-box">
    <h2>CrÃ©er un joueur RP</h2>

    <label>Nom RP :</label>
    <input id="admin_createNom" type="text">

    <label>PrÃ©nom RP :</label>
    <input id="admin_createPrenom" type="text">

    <button onclick="admin_validerCreationJoueur()">CrÃ©er</button>
    <button class="btn-close" onclick="admin_fermerPopupCreate()">Annuler</button>
  </div>
</div>

<!-- POPUP : CrÃ©ation entreprise -->
<div id="admin_popupEntreprise" class="popup-overlay" style="display:none;">
  <div class="popup-box">
    <h2>CrÃ©er une entreprise</h2>

    <label>Nom de lâ€™entreprise :</label>
    <input id="admin_popupNomEntreprise" type="text">

    <label>Nom du patron :</label>
    <input id="admin_popupPatronNom" type="text">

    <label>PrÃ©nom du patron :</label>
    <input id="admin_popupPatronPrenom" type="text">

    <button onclick="admin_validerCreationEntreprise()">CrÃ©er</button>
    <button class="btn-close" onclick="admin_fermerPopupEntreprise()">Annuler</button>
  </div>
</div>

<!-- POPUP : Ajouter admin -->
<div id="admin_popupAddAdmin" class="popup-overlay" style="display:none;">
  <div class="popup-box">
    <h2>Ajouter un administrateur</h2>

    <label>Email Google :</label>
    <input id="admin_addAdminEmail" type="email">

    <button onclick="admin_addAdmin()">Ajouter</button>
    <button class="btn-close" onclick="admin_closeAddAdminPopup()">Annuler</button>
  </div>
</div>

<!-- POPUP : Retirer admin -->
<div id="admin_popupRemoveAdmin" class="popup-overlay" style="display:none;">
  <div class="popup-box">
    <h2>Retirer un administrateur</h2>

    <label>Email Google :</label>
    <input id="admin_removeAdminEmail" type="email">

    <button onclick="admin_removeAdmin()">Retirer</button>
    <button class="btn-close" onclick="admin_closeRemoveAdminPopup()">Annuler</button>
  </div>
</div>

<!-- ============================================================
     INITPAGE â€” appelÃ© automatiquement par le moteur SPA
     IMPORTANT : aucune variable globale ici !
============================================================ -->
<script>
function initPage() {
  console.log("ğŸŸ¦ [page_admin_panel] initPage() exÃ©cutÃ©");

  // VÃ©rification des fonctions avant exÃ©cution
  if (typeof admin_initRole === "function") {
    console.log("ğŸŸ© [page_admin_panel] admin_initRole() â†’ OK");
    admin_initRole();
  } else {
    console.warn("ğŸŸ§ [page_admin_panel] admin_initRole() introuvable");
  }

  if (typeof admin_afficherEtatConnexion === "function") {
    console.log("ğŸŸ© [page_admin_panel] admin_afficherEtatConnexion() â†’ OK");
    admin_afficherEtatConnexion();
  } else {
    console.warn("ğŸŸ§ [page_admin_panel] admin_afficherEtatConnexion() introuvable");
  }
}
</script>