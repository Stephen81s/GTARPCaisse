<!-- ============================================================
     SCRIPT : Navigation SPA
     MODULE : Menu latÃ©ral dynamique
     VERSION : PRO 2026
============================================================ -->

<script>
console.log("ğŸŸ¦ [nav] Script navigation chargÃ©.");

let currentPage = null;

/* ============================================================
   NAVIGATION â€” Mise en surbrillance du bouton actif
============================================================ */
function setActiveNav(pageName) {
  const links = document.querySelectorAll("#menu-links a");
  links.forEach(a => a.classList.remove("nav-active"));

  const id = "nav-" + pageName.replace("page_", "");
  const active = document.getElementById(id);

  if (active) {
    active.classList.add("nav-active");
    console.log("ğŸŸ© [nav] Bouton actif :", id);
  } else {
    console.warn("ğŸŸ§ [nav] Aucun bouton trouvÃ© pour :", id);
  }
}

/* ============================================================
   NAVIGATION â€” Ajout dâ€™un lien dans le menu
============================================================ */
function addMenuLink(label, page) {
  const id = "nav-" + page.replace("page_", "");

  const li = document.createElement("li");
  li.innerHTML = `<a id="${id}" href="javascript:void(0)" onclick="loadPage('${page}')">${label}</a>`;

  document.getElementById("menu-links").appendChild(li);
}

/* ============================================================
   MENU DYNAMIQUE SELON LE RÃ”LE
============================================================ */
function buildMenu(role) {
  console.log("ğŸŸ¦ [nav] Construction du menu pour rÃ´le :", role);

  const menu = document.getElementById("menu-links");
  menu.innerHTML = "";

  // Toujours visible
  addMenuLink("ğŸ  Accueil", "page_accueil");

  if (role !== "joueur") {
    addMenuLink("ğŸ§ Joueurs", "page_joueurs");
    addMenuLink("ğŸ¢ Entreprises", "page_entreprises");
    addMenuLink("ğŸ’¼ EmployÃ©s", "page_employes");
  }

  if (role === "admin_secondaire" || role === "admin_principal") {
    addMenuLink("ğŸ›¡ï¸ Admin Panel", "page_admin_panel");
  }

  if (role === "admin_principal") {
    addMenuLink("ğŸ‘‘ Configuration systÃ¨me", "page_config_systeme");
    addMenuLink("ğŸ› ï¸ Maintenance", "page_maintenance_systeme");
  }
}

/* ============================================================
   HOOK : appelÃ© automatiquement par loadPage()
============================================================ */
function onPageLoaded(pageName) {
  setActiveNav(pageName);
}
</script>