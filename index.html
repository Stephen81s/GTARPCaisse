<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <title>GTARP — Interface Stephen 1</title>

    <link rel="stylesheet" href="css/style.css">

    <!-- 1) Charger la librairie Supabase -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <!-- 2) Initialiser Supabase AVANT api.js -->
    <script>
        window.supabase = supabase.createClient(
            "https://oxqgytbquvopynfretpu.supabase.co",
            "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im94cWd5dGJxdXZvcHluZnJldHB1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzA5MDk0NjYsImV4cCI6MjA4NjQ4NTQ2Nn0.zEdv64BHAANkhSC1TX9QLk0EIC858oOC-zr58GBidVc"
        );

        console.log("%c[INDEX] Supabase initialisé", "color:#4CAF50;font-weight:bold;");
    </script>

    <!-- 3) Charger les modules JS qui utilisent Supabase -->
    <script src="js/logger.js" defer></script>
    <script src="js/api.js" defer></script>
    <script src="js/caisse.js" defer></script>
    <script src="js/ressource.js" defer></script>
    <script src="js/ticket.js" defer></script>
    <script src="js/service.js" defer></script>
    <script src="js/admin.js" defer></script>

    <style>
        #page-frame {
            width: 100%;
            height: calc(100vh - 80px);
            border: none;
        }
    </style>
</head>

<body>

    <header class="header">
        <div class="header-title">GTARP — Interface Stephen V1</div>
        <nav class="header-right">
            <button onclick="openPage('interfaces/accueil.html')">Accueil</button>
            <button onclick="openPage('interfaces/caisse.html')">Caisse</button>
            <button onclick="openPage('interfaces/ticket.html')">Ticket</button>
            <button onclick="openPage('interfaces/ressource.html')">Ressource</button>
            <button onclick="openPage('interfaces/service.html')">Service</button>
            <button onclick="openPage('interfaces/admin.html')">Admin</button>
        </nav>
    </header>

    <main>
        <iframe id="page-frame" src="interfaces/accueil.html"></iframe>
    </main>

    <script>
        function openPage(page) {
            console.log("%c[NAV] Ouverture de la page : " + page, "color:#2196F3;font-weight:bold;");
            document.getElementById("page-frame").src = page;
        }
    </script>

</body>
</html>
