<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <title>GTARP â€” Interface Stephen</title>

    <!-- ============================================================
         ðŸŽ¨ STYLE GLOBAL
         ChargÃ© une seule fois ici
    ============================================================ -->
    <link rel="stylesheet" href="css/style.css">

    <!-- ============================================================
         ðŸ—„ï¸ SUPABASE â€” Initialisation globale
         (NE JAMAIS recharger ailleurs)
    ============================================================ -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <script>
        // Client Supabase global
        const supabase = window.supabase.createClient(
            "https://oxqgytbquvopynfretpu.supabase.co",
            "sb_publishable_tzM9hvhjG8e58gU_IqaS8A_hyWWqykB"
        );

        console.log("%c[INDEX] Supabase initialisÃ©", "color:#4CAF50;font-weight:bold;");
    </script>

    <!-- ============================================================
         ðŸ“œ MODULES JS GLOBAUX
         (chargÃ©s une seule fois)
    ============================================================ -->
    <script src="js/logger.js" defer></script>
    <script src="js/api.js" defer></script>
    <script src="js/caisse.js" defer></script>
    <script src="js/ressource.js" defer></script>
    <script src="js/ticket.js" defer></script>
    <script src="js/service.js" defer></script>
    <script src="js/admin.js" defer></script>

    <!-- ============================================================
         ðŸ§© STYLE IFRAME
    ============================================================ -->
    <style>
        #page-frame {
            width: 100%;
            height: calc(100vh - 80px);
            border: none;
            background: transparent;
        }
    </style>
</head>

<body>

    <!-- ============================================================
         ðŸ” HEADER GLOBAL
    ============================================================ -->
    <header class="header">
        <div class="header-title">GTARP â€” Interface Stephen V1</div>

        <nav class="header-right">
            <button onclick="openPage('interfaces/accueil.html')">Accueil</button>
            <button onclick="openPage('interfaces/caisse.html')">Caisse</button>
            <button onclick="openPage('interfaces/ticket.html')">Ticket</button>
            <button onclick="openPage('interfaces/ressource.html')">Ressource</button>
            <button onclick="openPage('interfaces/service.html')">Service</button>
            <button onclick="openPage('interfaces/admin.html')">Admin</button>
        </nav>
    </header>

    <!-- ============================================================
         ðŸ§© CONTENEUR DES PAGES (IFRAME)
    ============================================================ -->
    <main>
        <iframe id="page-frame" src="interfaces/accueil.html"></iframe>
    </main>

    <!-- ============================================================
         ðŸ”„ NAVIGATION
         Fonction simple et robuste
    ============================================================ -->
    <script>
        function openPage(page) {
            console.log("%c[NAV] Ouverture de la page : " + page, "color:#2196F3;font-weight:bold;");
            document.getElementById("page-frame").src = page;
        }
    </script>

</body>
</html>
